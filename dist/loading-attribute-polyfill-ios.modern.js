const e=function(){const e=/iPad|iPhone|iPod/.test(navigator.userAgent),t=navigator.userAgent.includes("Macintosh");return e||t}(),t="loading"in HTMLImageElement.prototype&&!e,r="loading"in HTMLIFrameElement.prototype&&!e,a="onscroll"in window;let o;function n(e){let t=[];"picture"===e.parentNode.tagName.toLowerCase()&&(function(e){const t=e.querySelector("source[data-lazy-remove]");t&&e.removeChild(t)}(e.parentNode),t=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),t.push(e),t.forEach(e=>{e.hasAttribute("data-lazy-srcset")&&(e.setAttribute("srcset",e.getAttribute("data-lazy-srcset")),e.removeAttribute("data-lazy-srcset"))}),e.setAttribute("src",e.getAttribute("data-lazy-src")),e.removeAttribute("data-lazy-src")}function c(e){const n=document.createElement("div");for(n.innerHTML=function(e){let n=e.textContent||e.innerHTML;const c="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 "+((n.match(/width=['"](\d+)['"]/)||!1)[1]||1)+" "+((n.match(/height=['"](\d+)['"]/)||!1)[1]||1)+"%27%3E%3C/svg%3E";return(/<img/gim.test(n)&&!t||/<iframe/gim.test(n)&&!r)&&a&&(void 0===o?n=n.replace(/(?:\r\n|\r|\n|\t| )src=/g,' lazyload="1" src='):(n=n.replace("<source",'<source srcset="'+c+'" data-lazy-remove="true"></source>\n<source'),n=n.replace(/(?:\r\n|\r|\n|\t| )srcset=/g," data-lazy-srcset=").replace(/(?:\r\n|\r|\n|\t| )src=/g,' src="'+c+'" data-lazy-src='))),n}(e);n.firstChild;){const c=n.firstChild;if(a&&void 0!==o&&c.tagName&&(("img"===c.tagName.toLowerCase()||"picture"===c.tagName.toLowerCase())&&!t||"iframe"===c.tagName.toLowerCase()&&!r)){const e="picture"===c.tagName.toLowerCase()?n.querySelector("img"):c;o.observe(e)}e.parentNode.insertBefore(c,e)}e.parentNode.removeChild(e)}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(o=new IntersectionObserver(function(e,t){e.forEach(e=>{if(0===e.intersectionRatio)return;const r=e.target;t.unobserve(r),n(r)})},{rootMargin:"0px 0px 256px 0px",threshold:.01}));const s=()=>{document.querySelectorAll("noscript.loading-lazy").forEach(e=>c(e)),void 0!==window.matchMedia&&window.matchMedia("print").addListener(e=>{e.matches&&document.querySelectorAll('img[loading="lazy"][data-lazy-src],iframe[loading="lazy"][data-lazy-src]').forEach(e=>{n(e)})})};/comp|inter/.test(document.readyState)?s():"addEventListener"in document?document.addEventListener("DOMContentLoaded",()=>{s()}):document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()});const i={prepareElement:c};export{i as default};
//# sourceMappingURL=loading-attribute-polyfill-ios.modern.js.map
