var e,t,r,a=(e=/iPad|iPhone|iPod/.test(navigator.userAgent),t=navigator.userAgent.includes("Macintosh"),e||t),o="loading"in HTMLImageElement.prototype&&!a,n="loading"in HTMLIFrameElement.prototype&&!a,i="onscroll"in window;function c(e){var t,r,a=[];"picture"===e.parentNode.tagName.toLowerCase()&&((r=(t=e.parentNode).querySelector("source[data-lazy-remove]"))&&t.removeChild(r),a=Array.prototype.slice.call(e.parentNode.querySelectorAll("source"))),a.push(e),a.forEach(function(e){e.hasAttribute("data-lazy-srcset")&&(e.setAttribute("srcset",e.getAttribute("data-lazy-srcset")),e.removeAttribute("data-lazy-srcset"))}),e.setAttribute("src",e.getAttribute("data-lazy-src")),e.removeAttribute("data-lazy-src")}function s(e){var t=document.createElement("div");for(t.innerHTML=function(e){var t=e.textContent||e.innerHTML,a="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 "+((t.match(/width=['"](\d+)['"]/)||!1)[1]||1)+" "+((t.match(/height=['"](\d+)['"]/)||!1)[1]||1)+"%27%3E%3C/svg%3E";return(/<img/gim.test(t)&&!o||/<iframe/gim.test(t)&&!n)&&i&&(t=void 0===r?t.replace(/(?:\r\n|\r|\n|\t| )src=/g,' lazyload="1" src='):(t=t.replace("<source",'<source srcset="'+a+'" data-lazy-remove="true"></source>\n<source')).replace(/(?:\r\n|\r|\n|\t| )srcset=/g," data-lazy-srcset=").replace(/(?:\r\n|\r|\n|\t| )src=/g,' src="'+a+'" data-lazy-src=')),t}(e);t.firstChild;){var a=t.firstChild;if(i&&void 0!==r&&a.tagName&&(("img"===a.tagName.toLowerCase()||"picture"===a.tagName.toLowerCase())&&!o||"iframe"===a.tagName.toLowerCase()&&!n)){var c="picture"===a.tagName.toLowerCase()?t.querySelector("img"):a;r.observe(c)}e.parentNode.insertBefore(a,e)}e.parentNode.removeChild(e)}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"IntersectionObserver"in window&&(r=new IntersectionObserver(function(e,t){e.forEach(function(e){if(0!==e.intersectionRatio){var r=e.target;t.unobserve(r),c(r)}})},{rootMargin:"0px 0px 256px 0px",threshold:.01}));var d=function(){document.querySelectorAll("noscript.loading-lazy").forEach(function(e){return s(e)}),void 0!==window.matchMedia&&window.matchMedia("print").addListener(function(e){e.matches&&document.querySelectorAll('img[loading="lazy"][data-lazy-src],iframe[loading="lazy"][data-lazy-src]').forEach(function(e){c(e)})})};/comp|inter/.test(document.readyState)?d():"addEventListener"in document?document.addEventListener("DOMContentLoaded",function(){d()}):document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&d()});var l={prepareElement:s};export{l as default};
//# sourceMappingURL=loading-attribute-polyfill-ios.module.js.map
